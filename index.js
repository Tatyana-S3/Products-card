import"./assets/styles-D7T1bTIU.js";import{a as i,i as u}from"./assets/vendor-TDaTq0oI.js";const E="https://dummyjson.com",p={CATEGORIES:"/products/category-list",PRODUCTS:"/products",PRODUCTS_ID:"/products/",SEARCH:"/products/search",PRODUCTS_CATEGORY:"/products/category/"},c={WISHLIST:"wishlist",CART:"cart",THEME:"theme"},l=12;i.defaults.baseURL=E;async function w(){return(await i.get(p.CATEGORIES)).data}async function P(t){const e={limit:l,skip:(t-1)*l};return(await i.get(p.PRODUCTS,{params:e})).data}async function R(t){return(await i.get(`${p.PRODUCTS_ID}${t}`)).data}async function A(t){const e={q:t};return(await i.get(p.SEARCH,{params:e})).data}async function $(t){return(await i.get(`${p.PRODUCTS_CATEGORY}${t}`)).data.products}const o={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),categoriesBtn:document.querySelector(".categories__btn"),divNotFound:document.querySelector(".not-found"),loadMoreBtn:document.querySelector(".load-more-btn"),loader:document.querySelector(".loader"),modalWindow:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalProduct:document.querySelector(".modal-product"),modalCartBtn:document.querySelector(".modal-product__btn--cart"),modalWishlistBtn:document.querySelector(".modal-product__btn--wishlist"),searchForm:document.querySelector(".search-form"),searchClearBtn:document.querySelector(".search-form__btn-clear"),searchFormInput:document.querySelector(".search-form__input"),navCartCount:document.querySelector(".nav__count[data-cart-count]"),summaryCartCount:document.querySelector(".cart-summary__value[data-count]"),navWishlistCount:document.querySelector(".nav__count[data-wishlist-count]")};function q(t){const r=["All",...t].map(s=>`
        <li class="categories__item">
   <button class="categories__btn" type="button">${s}</button>
 </li>
            `).join("");o.categoriesList.insertAdjacentHTML("beforeend",r)}function x(t){const e=t.map(({id:r,thumbnail:s,description:n,title:d,brand:C,category:y,price:W})=>`
        <li class="products__item" data-id="${r}">
    <img class="products__image" src="${s}" alt="${n}"/>
    <p class="products__title">${d}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${C}</span></p>
    <p class="products__category">Category: ${y}</p>
    <p class="products__price">Price: ${W}$</p>
 </li>
            `).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function H({thumbnail:t,description:e,title:r,returnPolicy:s,shippingInformation:n,price:d}){const C=`
  <img class="modal-product__img" src="${t}" alt="${e}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${r}</p>
        <ul class="modal-product__tags"></ul>
        <p class="modal-product__description">${e}</p>
        <p class="modal-product__shipping-information">Shipping:${n}</p>
        <p class="modal-product__return-policy">Return Policy:${s}</p>
        <p class="modal-product__price">Price:${d} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `;o.modalProduct.innerHTML=C}function M(){o.loadMoreBtn.classList.remove("is-hidden")}function B(){o.loadMoreBtn.classList.add("is-hidden")}function O(){o.loader.classList.add("visible")}function N(){o.loader.classList.remove("visible")}function k(){const t=document.querySelector(".products__item");if(t){const e=t.getBoundingClientRect().height;window.scrollBy({top:e*3,behavior:"smooth"})}}function L(){o.modalWindow.classList.toggle("modal--is-open")}function D(){L()}function f(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.log("Error saving data to LocalStorege:",r.message)}}function b(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.log(`Error getting data from LS: ${e.message}`),null}}function S(){return b(c.CART)||[]}function v(){return b(c.WISHLIST)||[]}let a=1,_=0,h="All",m="";async function g(){O(),o.divNotFound.classList.remove("not-found--visible");try{let t=[],e=0;const r=(a-1)*l,s=r+l;if(m){const n=await A(m);e=n.total,t=n.products.slice(r,s)}else if(h==="All"){const n=await P(a);e=n.total,t=n.products}else{const n=await $(h);e=n.length,t=n.products.slice(r,s)}if(a===1&&(o.productsList.innerHTML=""),!t||t.length===0){o.divNotFound.classList.add("not-found--visible"),B();return}_=Math.ceil(e/l),x(t),a>1&&k(),a<_?M():B()}catch{u.error({title:"Error",message:"Illegal operation"})}finally{N()}}async function F(){a++,await g()}async function U(){try{const t=await w();q(t),a=1,h="All",await g()}catch(t){console.error("error initial home page",t)}}async function j(t){if(t.target.tagName!=="BUTTON")return;o.categoriesList.querySelectorAll(".categories__btn").forEach(r=>{r.classList.remove("categories__btn--active")});try{const r=t.target;h=r.textContent.trim(),m="",a=1,_=0,r.classList.add("categories__btn--active"),o.productsList.innerHTML="",o.divNotFound.classList.remove("not-found--visible"),await g()}catch(r){console.log(r.message)}}async function G(t){const e=t.target.closest(".products__item");if(!e)return;const r=e.dataset.id;try{const s=await R(r);H(s),L(),o.modalCartBtn.dataset.id=r,o.modalWishlistBtn.dataset.id=r;const d=S().includes(r),y=v().includes(r);d?o.modalCartBtn.textContent="Remove from cart":o.modalCartBtn.textContent="Add to cart",y?o.modalWishlistBtn.textContent="Remove from Wishlist":o.modalWishlistBtn.textContent="Add to Wishlist"}catch{u.error({message:"Error loading product"})}}async function Y(t){t.preventDefault();const e=o.searchFormInput.value.trim().toLowerCase();e&&(m=e,a=1,await g(),o.searchForm.reset())}async function z(){o.searchFormInput.value="",m="",a=1,await g()}async function J(t){const e=t.target.dataset.id;if(!e)return;const r=S(),s=r.findIndex(n=>n===e);s===-1?(r.push(e),f(c.CART,r),o.modalCartBtn.textContent="Remove from cart",u.success({message:"Item added to your basket!"}),I()):(r.splice(s,1),f(c.CART,r),o.modalCartBtn.textContent="Add to cart",I())}function I(){const e=S().length;o.navCartCount&&(o.navCartCount.textContent=e),o.summaryCartCount&&(o.summaryCartCount.textContent=e)}function T(){const e=v().length;o.navWishlistCount&&(o.navWishlistCount.textContent=e)}async function K(t){const e=t.target.dataset.id;if(!e)return;const r=v(),s=r.findIndex(n=>n===e);s===-1?(r.push(e),f(c.WISHLIST,r),o.modalWishlistBtn.textContent="Remove from Wishlist",u.success({message:"Item added to your Wishlist!"}),T()):(r.splice(s,1),f(c.WISHLIST,r),o.modalWishlistBtn.textContent="Add to Wishlist",u.info({message:"Item removed from your Wishlist!"}),T())}document.addEventListener("DOMContentLoaded",U);o.categoriesList.addEventListener("click",j);o.productsList.addEventListener("click",G);o.searchForm.addEventListener("submit",Y);o.searchClearBtn.addEventListener("click",z);o.loadMoreBtn.addEventListener("click",F);o.modalCloseBtn.addEventListener("click",D);o.modalCartBtn.addEventListener("click",J);o.modalWishlistBtn.addEventListener("click",K);document.addEventListener("keydown",t=>{t.code==="Escape"&&L()});
//# sourceMappingURL=index.js.map
