import{a as l,i as m}from"./vendor-Cikf_Pls.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const W="https://dummyjson.com",f={CATEGORIES:"/products/category-list",PRODUCTS:"/products",PRODUCTS_ID:"/products/",SEARCH:"/products/search",PRODUCTS_CATEGORY:"/products/category/"},d={WISHLIST:"wishlist",CART:"cart",THEME:"theme"},u=12;l.defaults.baseURL=W;async function w(){return(await l.get(f.CATEGORIES)).data}async function R(e){const t={limit:u,skip:(e-1)*u};return(await l.get(f.PRODUCTS,{params:t})).data}async function A(e){return(await l.get(`${f.PRODUCTS_ID}${e}`)).data}async function q(e){const t={q:e};return(await l.get(f.SEARCH,{params:t})).data}async function $(e){return(await l.get(`${f.PRODUCTS_CATEGORY}${e}`)).data.products}const s={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),categoriesBtn:document.querySelector(".categories__btn"),divNotFound:document.querySelector(".not-found"),loadMoreBtn:document.querySelector(".load-more-btn"),loader:document.querySelector(".loader"),modalWindow:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),modalProduct:document.querySelector(".modal-product"),modalCartBtn:document.querySelector(".modal-product__btn--cart"),modalWishlistBtn:document.querySelector(".modal-product__btn--wishlist"),searchForm:document.querySelector(".search-form"),searchClearBtn:document.querySelector(".search-form__btn-clear"),searchFormInput:document.querySelector(".search-form__input"),navCartCount:document.querySelector(".nav__count[data-cart-count]"),summaryCartCount:document.querySelector(".cart-summary__value[data-count]"),navWishlistCount:document.querySelector(".nav__count[data-wishlist-count]")};function E(e){const o=["All",...e].map(a=>`
        <li class="categories__item">
   <button class="categories__btn" type="button">${a}</button>
 </li>
            `).join("");s.categoriesList.insertAdjacentHTML("beforeend",o)}function O(e){const t=e.map(({id:o,thumbnail:a,description:r,title:n,brand:i,category:C,price:P})=>`
        <li class="products__item" data-id="${o}">
    <img class="products__image" src="${a}" alt="${r}"/>
    <p class="products__title">${n}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:${i}</span></p>
    <p class="products__category">Category: ${C}</p>
    <p class="products__price">Price: ${P}$</p>
 </li>
            `).join("");s.productsList.insertAdjacentHTML("beforeend",t)}function x({thumbnail:e,description:t,title:o,returnPolicy:a,shippingInformation:r,price:n}){const i=`
  <img class="modal-product__img" src="${e}" alt="${t}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags"></ul>
        <p class="modal-product__description">${t}</p>
        <p class="modal-product__shipping-information">Shipping:${r}</p>
        <p class="modal-product__return-policy">Return Policy:${a}</p>
        <p class="modal-product__price">Price:${n} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `;s.modalProduct.innerHTML=i}function H(){s.loadMoreBtn.classList.remove("is-hidden")}function I(){s.loadMoreBtn.classList.add("is-hidden")}function N(){s.loader.classList.add("visible")}function M(){s.loader.classList.remove("visible")}function F(){const e=document.querySelector(".products__item");if(e){const t=e.getBoundingClientRect().height;window.scrollBy({top:t*3,behavior:"smooth"})}}function T(){s.modalWindow.classList.toggle("modal--is-open")}document.addEventListener("keydown",e=>{e.code==="Escape"&&T()});function y(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(o){console.log("Error saving data to LocalStorege:",o.message)}}function B(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.log(`Error getting data from LS: ${t.message}`),null}}function v(){return B(d.CART)||[]}function b(){return B(d.WISHLIST)||[]}let c=1,_=0,h="All",p="";async function g(){N(),s.divNotFound.classList.remove("not-found--visible");try{let e=[],t=0;const o=(c-1)*u,a=o+u;if(p){const r=await q(p);t=r.total,e=r.products.slice(o,a)}else if(h==="All"){const r=await R(c);t=r.total,e=r.products}else{const r=await $(h);t=r.length,e=r.slice(o,a)}if(c===1&&(s.productsList.innerHTML=""),!e||e.length===0){s.divNotFound.classList.add("not-found--visible"),I();return}_=Math.ceil(t/u),O(e),c>1&&F(),c<_?H():I()}catch{m.error({title:"Error",message:"Illegal operation"})}finally{M()}}async function U(){c++,await g()}async function j(){S(),L();try{const e=await w();E(e),c=1,h="All",await g()}catch(e){console.error("error initial home page",e)}}async function G(e){if(e.target.tagName!=="BUTTON")return;s.categoriesList.querySelectorAll(".categories__btn").forEach(o=>{o.classList.remove("categories__btn--active")});try{const o=e.target;h=o.textContent.trim(),p="",c=1,_=0,o.classList.add("categories__btn--active"),s.productsList.innerHTML="",s.divNotFound.classList.remove("not-found--visible"),await g()}catch(o){console.log(o.message)}}async function k(e){const t=e.target.closest(".products__item");if(!t)return;const o=t.dataset.id;try{const a=await A(o);x(a),T(),s.modalCartBtn.dataset.id=o,s.modalWishlistBtn.dataset.id=o;const n=v().includes(o),C=b().includes(o);n?s.modalCartBtn.textContent="Remove from cart":s.modalCartBtn.textContent="Add to cart",C?s.modalWishlistBtn.textContent="Remove from Wishlist":s.modalWishlistBtn.textContent="Add to Wishlist"}catch{m.error({message:"Error loading product"})}}async function Y(e){e.preventDefault();const t=s.searchFormInput.value.trim().toLowerCase();t&&(p=t,c=1,await g(),s.searchForm.reset())}async function z(){s.searchFormInput.value="",p="",c=1,await g()}function S(){const t=v().length;s.navCartCount&&(s.navCartCount.textContent=t),s.summaryCartCount&&(s.summaryCartCount.textContent=t)}function L(){const t=b().length;s.navWishlistCount&&(s.navWishlistCount.textContent=t)}async function J(e){const t=e.target.dataset.id;if(!t)return;const o=v(),a=o.findIndex(r=>r===t);a===-1?(o.push(t),y(d.CART,o),s.modalCartBtn.textContent="Remove from cart",m.success({message:"Item added to your basket!"}),S()):(o.splice(a,1),y(d.CART,o),s.modalCartBtn.textContent="Add to cart",S())}async function K(e){const t=e.target.dataset.id;if(!t)return;const o=b(),a=o.findIndex(r=>r===t);if(a===-1)o.push(t),y(d.WISHLIST,o),s.modalWishlistBtn.textContent="Remove from Wishlist",m.success({message:"Item added to your Wishlist!"}),L();else if(o.splice(a,1),y(d.WISHLIST,o),s.modalWishlistBtn.textContent="Add to Wishlist",m.info({message:"Item removed from your Wishlist!"}),L(),s.productsList){const r=s.productsList.querySelector(`.products__item[data-id="${t}"]`);r&&(r.remove(),o.length===0&&s.divNotFound.classList.add("not-found--visible"))}}export{A as a,s as b,J as c,K as d,G as e,z as f,b as g,U as h,j as i,S as j,v as k,k as p,O as r,Y as s,T as t,L as u};
//# sourceMappingURL=handlers-Cj32vxIM.js.map
